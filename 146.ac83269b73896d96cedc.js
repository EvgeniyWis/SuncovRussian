"use strict";(self.webpackChunksuncov_russian=self.webpackChunksuncov_russian||[]).push([[146],{411:function(e,r,t){t.d(r,{L:function(){return n},v:function(){return i}}),window.matchMedia=window.matchMedia||function(){return{matches:!1,addListener:function(){},removeListener:function(){}}};const n=window.matchMedia("(max-width: 1000px)"),i=window.matchMedia("(max-width: 600px)")},146:function(e,r,t){t.r(r),t.d(r,{Trainer:function(){return M}});var n={};t.r(n),t.d(n,{TrainerWord:function(){return y},TrainerWord__default:function(){return T},TrainerWord__invalid:function(){return f}});var i=t(990),o="jEtgvJFn",s=t(540),d=t(468),a=t(848);const c=e=>{let{children:r,reducers:t,removeAfterUnmount:n=!0}=e;const i=(0,d.Pj)(),o=i.reducerManager.getMountedReducers();return(0,s.useEffect)((()=>(Object.entries(t).forEach((e=>{let[r,t]=e;o[r]||i.reducerManager.add(r,t)})),()=>{n&&Object.entries(t).forEach((e=>{let[r]=e;i.reducerManager.remove(r)}))})),[o,t,n,i.reducerManager]),(0,a.jsx)(a.Fragment,{children:r})};c.displayName="DynamicModuleLoader";var l=t(240),u=t(411),m=t(774),h=t(86),y="YCTH8N0S",T="_Va8pQo8",f="q5JGLkfR";const p=(0,s.memo)((e=>{let{className:r,style:t,dataTestId:o,onClick:s,children:d,type:c="default"}=e;return(0,a.jsx)(i.so,{justify:"center","data-testid":o,width:"100",onClick:s,className:`TrainerWord ${y} ${r} ${n[`TrainerWord__${c}`]}`,style:t,children:d})}));p.displayName="TrainerWord";var w=t(986);const W=(0,s.memo)((e=>{let{randomWord:r,randomWordsIsReverse:t,wordOnFail:n,wordOnSuccess:o}=e;const d=(0,h.n)(),{isIncorrect:c,isErrorWork:l}=(0,s.useContext)(w.H);return(0,a.jsxs)(i.so,{justify:"center",direction:u.L.matches?t?"columnReverse":"column":t?"rowReverse":"row",width:"100",children:[(0,a.jsx)(p,{dataTestId:"PrimaryTrainerWords__valid",onClick:()=>o(d,l,r.id),style:{borderRightWidth:u.L.matches||t||c?3:0,borderBottomWidth:u.L.matches?t||c?3:0:3,fontSize:r.valid.length>=10?26:36},children:r.valid}),(0,a.jsx)(p,{dataTestId:"PrimaryTrainerWords__invalid",onClick:()=>n(d,l,r.id),type:c?"invalid":"default",style:{borderRightWidth:u.L.matches?3:t?0:3,borderBottomWidth:u.L.matches&&t?0:3,fontSize:r.valid.length>=10?26:36},children:r.invalid})]})}));W.displayName="PrimaryTrainerWords";var b=t(672),x=t(714);const j=(0,s.memo)((e=>{let{randomWord:r,wordOnSuccess:t,wordOnFail:n}=e;const o=(0,h.n)(),{isIncorrect:d,isErrorWork:c}=(0,s.useContext)(w.H);return(0,a.jsxs)(i.so,{width:"100",direction:"column",gap:"10",justify:"center",children:[(0,a.jsx)("span",{className:"m6A8UH4_","data-testid":"UnionsTrainerWords__word",children:r.word}),(0,a.jsx)(i.so,{justify:"center",direction:u.L.matches?"column":"row",width:"100",children:x.F.map(((e,i)=>(0,a.jsx)(p,{dataTestId:`UnionsTrainerWords__${e}`,onClick:e===r.unionType?()=>t(o,c,r.id):()=>n(o,c,r.id),type:d&&e!==r.unionType?"invalid":"default",style:0===i?{borderRightWidth:u.L.matches?3:0,borderBottomWidth:u.L.matches?0:3}:{},children:e},e)))})]})}));j.displayName="UnionsTrainerWords";var v=t(950),g="KIGBtKvW",k="GFOaB4QE";const C=(0,s.memo)((e=>{let{initializeWords:r,updateRandomWord:t}=e;const n=(0,h.n)(),{setWords:o}=(0,l.MR)(),{totalTime:d,setTotalTime:c}=(0,s.useContext)(w.H),{isErrorWork:u,setIsErrorWork:m}=(0,s.useContext)(w.H),y=(0,s.useMemo)((()=>Math.round(d/6e4)),[d]),T=(0,s.useMemo)((()=>Math.round(d/1e3%60)),[d]),f=(0,s.useMemo)((()=>n.filter((e=>e.uncorrectTimes>0)).sort(((e,r)=>r.uncorrectTimes-e.uncorrectTimes))),[n]),p=(0,s.useCallback)((()=>{m(!0);const e=f.map((e=>({...e,probability:1,uncorrectTimes:0,consecutivelyTimes:0,inProgress:!1})));o(e),c(0),t(e)}),[m,c,o,t,f]),W=(0,s.useCallback)((()=>{c(0),r()}),[r,c]);return(0,a.jsxs)(i.so,{justify:"between",direction:"column",width:"100",maxHeight:!0,children:[(0,a.jsxs)("span",{className:k,children:["Общее время:"," ",`${y<10?"0":""}${y}`,":",`${T<10?"0":""}${T}`]}),f.length>0?(0,a.jsxs)(i.so,{maxHeight:!0,justify:"around",direction:"column",children:[(0,a.jsxs)(i.so,{direction:"column",children:[(0,a.jsx)("span",{className:k,children:"Ошибки:"}),(0,a.jsx)(i.so,{direction:"column",gap:"3",width:"100",children:f.map((e=>(0,a.jsxs)("span",{style:{fontSize:24-(f.length/2>=21?21:f.length/2)},className:"_4L2iKzyL",children:["ударения"===e.trainerType&&(0,a.jsxs)(a.Fragment,{children:[e.valid," -"," ",e.uncorrectTimes," ",[2,3,4].includes(e.uncorrectTimes)?"раза":"раз"]}),"виды союзов"===e.trainerType&&(0,a.jsxs)(a.Fragment,{children:[e.word," -"," ",e.uncorrectTimes," ",[2,3,4].includes(e.uncorrectTimes)?"раза":"раз"," ","(Правильно: ",e.unionType,")"]})]},e.id)))})]}),!u&&(0,a.jsx)("button",{className:g,onClick:p,type:"button",children:"Работа над ошибками"})]}):(0,a.jsx)("button",{className:g,onClick:W,type:"button",children:"Повторить"})]})}));C.displayName="TrainerTotalResult";const S=(e,r,t)=>{const n=(0,h.n)(),i=(0,s.useMemo)((()=>n.find((r=>r.id===e))),[e,n]);return{updateRandomWord:(0,s.useCallback)((i=>{let o;o=i?i.filter((r=>r.id!==e)):n.filter((r=>r.id!==e));const s=[!0,!1][Math.floor(2*Math.random())];if(r(s),0===o.length)return;const d=o.reduce(((e,r)=>e+(r.probability||1)),0)*Math.random();for(let e=0,r=0;;e++)if(r+=o[e].probability||1,r>d)return void t(o[e].id)}),[e,t,r,n]),randomWord:i}},N=(0,s.memo)((e=>{let{words:r}=e;const{setWords:t}=(0,l.MR)(),[n,d]=(0,s.useState)(null),[c,y]=(0,s.useState)(!1),{randomWord:T,updateRandomWord:f}=S(n,y,d),{totalTime:p,setIsIncorrect:x,isIncorrect:g,isErrorWork:k}=(0,s.useContext)(w.H);(0,s.useEffect)((()=>{T||d(0)}),[n]);const{wordOnFail:N,wordOnSuccess:M,showNewWord:I,waitRepeatedClickInFail:R}=((e,r,t,n)=>{const{changeWordProbability:i,changeWordUncorrectTimes:o,changeWordConsecutivelyTimes:d,changeWordInProgressStatus:a}=(0,l.MR)(),[c,u]=(0,s.useState)(!1),{updateRandomWord:m}=S(e,r,t),h=(0,s.useCallback)(((e,r,t)=>{u(!1),n(!1);const s=e.find((e=>e.id===t));s&&(r||(i({probability:.2,id:s.id}),o({id:s.id,uncorrectTimes:s.uncorrectTimes+1})),d({id:s.id,consecutivelyTimes:0}),a({id:s.id,inProgress:!1}),m(),(document.querySelector("#root")||document.querySelector("body")).style.pointerEvents="all",document.onclick=null)}),[d,a,i,o,n,u,m]),y=(0,s.useCallback)(((e,r,t)=>{if(c)return;new Audio("sounds/FailSound.mp3").play(),n(!0),u(!0);const i=document.querySelector("#root")||document.querySelector("body"),o=setTimeout((()=>{i.style.pointerEvents="none",document.onclick=()=>h(e,r,t),clearTimeout(o)}),0)}),[n,u,h,c]),T=(0,s.useCallback)(((e,r,t)=>{if(c)return;const n=e.find((e=>e.id===t));if(n){if(r){const e=n.consecutivelyTimes+1;d({id:n.id,consecutivelyTimes:e}),3===e&&(a({id:n.id,inProgress:!0}),i({probability:.05,id:n.id}))}else.2===n.probability?i({id:n.id,probability:.1}):.1===n.probability?i({id:n.id,probability:.05}):(i({id:n.id,probability:.01}),a({id:n.id,inProgress:!0}));m()}}),[d,a,i,m,c]);return{showNewWord:h,wordOnSuccess:T,wordOnFail:y,waitRepeatedClickInFail:c}})(n,y,d,x),_=(0,s.useCallback)((()=>{const e=JSON.parse(JSON.stringify(r));for(const r of e)r.probability=1,r.uncorrectTimes=0,r.consecutivelyTimes=0,r.inProgress=!1;const n=setTimeout((()=>{t(e),clearTimeout(n)}),0)}),[t,r]);(0,s.useEffect)((()=>{_()}),[_]);const E=(0,h.n)();return(0,s.useEffect)((()=>{E.length&&null===n&&f()}),[n,E,f]),(0,s.useEffect)((()=>(document.onkeydown=e=>((e,r)=>{if(p)return;R&&g&&I(r,k,n);const t=document.querySelectorAll(".TrainerWord"),i=e=>{"виды союзов"!==r[0].trainerType&&c?t[0===e?1:0].click():t[e].click()};u.L.matches?"ArrowUp"===e.key?i(0):"ArrowDown"===e.key&&i(1):"ArrowLeft"===e.key?i(0):"ArrowRight"===e.key&&i(1)})(e,E),()=>{document.onkeydown=null})),[k,g,n,c,I,E,p,R,N,M]),(0,a.jsx)(i.so,{maxHeight:!0,justify:"between",direction:"column",className:"HvqV2IY8",relative:!0,width:"100",children:p?(0,a.jsx)(C,{updateRandomWord:f,initializeWords:_}):(0,a.jsxs)(a.Fragment,{children:["ударения"===r[0].trainerType&&(0,a.jsx)(b.C,{text:"Выбирайте ответ, а система будет предлагать новые слова или\n                    те, в которых были допущены ошибки. Когда вы перестанете их\n                    допускать, шкала полностью заполнится. Заполните шкалу\n                    несколько раз, сделайте работу над ошибками - и вы готовы.",textClassName:o}),"виды союзов"===r[0].trainerType&&(0,a.jsx)(b.C,{text:"В этом тренажере под подчинительным союзом понимается любое\n                    средство подчинительной связи, т.е. союз, союзное слово,\n                    частица",textClassName:o}),g&&(0,a.jsx)(i.so,{className:"JiMO8Eb7","data-testid":"Trainer__uncorrect",justify:"center",children:"Неверно"}),T&&(0,a.jsxs)(a.Fragment,{children:["ударения"===r[0].trainerType&&(0,a.jsx)(W,{randomWord:T,randomWordsIsReverse:c,wordOnFail:N,wordOnSuccess:M}),"виды союзов"===r[0].trainerType&&(0,a.jsx)(j,{randomWord:T,wordOnSuccess:M,wordOnFail:N})]}),(0,a.jsx)(m.i,{}),(0,a.jsx)(v.W,{})]})})}));N.displayName="TrainerInner";const M=(0,s.memo)((e=>{let{words:r}=e;const[t,n]=(0,s.useState)(0),[i,o]=(0,s.useState)(!1),[d,u]=(0,s.useState)(!1);return(0,a.jsx)(w.H.Provider,{value:{totalTime:t,setTotalTime:n,isIncorrect:i,setIsIncorrect:o,isErrorWork:d,setIsErrorWork:u},children:(0,a.jsx)(c,{removeAfterUnmount:!1,reducers:{Trainer:l.a3},children:(0,a.jsx)(N,{words:r})})})}));M.displayName="Trainer"}}]);