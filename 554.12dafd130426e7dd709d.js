"use strict";(self.webpackChunksuncov_russian=self.webpackChunksuncov_russian||[]).push([[554],{554:function(e,r,t){t.r(r),t.d(r,{TrainerPage:function(){return _}});var n={};t.r(n),t.d(n,{TrainerWord:function(){return w},TrainerWord__default:function(){return b},TrainerWord__invalid:function(){return g}});var s=t(990),i="xikJpYWM",o=t(411),d=t(540),a=t(468),c=t(848);const l=e=>{let{children:r,reducers:t,removeAfterUnmount:n=!0}=e;const s=(0,a.Pj)(),i=s.reducerManager.getMountedReducers();return(0,d.useEffect)((()=>(Object.entries(t).forEach((e=>{let[r,t]=e;i[r]||s.reducerManager.add(r,t)})),()=>{n&&Object.entries(t).forEach((e=>{let[r]=e;s.reducerManager.remove(r)}))})),[i,t,n,s.reducerManager]),(0,c.jsx)(c.Fragment,{children:r})};l.displayName="DynamicModuleLoader";var u=t(670),m=t(519),h=t(337),y=t(800),T=t(491),p="lj0MBZoo",f="XVOH8ddq";const W=["ударения","cловарные слова","наречия","н/нн","морфологические нормы"],x=e=>{const{setWords:r}=(0,T.MR)();return{initializeWords:(0,d.useCallback)((()=>{const t=JSON.parse(JSON.stringify(e));for(const e of t)e.probability=1,e.uncorrectTimes=0,e.consecutivelyTimes=0,e.inProgress=!1;r(t)}),[r,e])}},j=(0,d.memo)((e=>{let{updateRandomWord:r,words:t}=e;const n=(0,y.n)(),{setWords:i}=(0,T.MR)(),{totalTime:o,setTotalTime:a,isErrorWork:l,setIsErrorWork:u}=(0,d.useContext)(h.U),m=(0,d.useMemo)((()=>Math.round(o/6e4)),[o]),j=(0,d.useMemo)((()=>Math.round(o/1e3%60)),[o]),w=(0,d.useMemo)((()=>n.filter((e=>e.uncorrectTimes>0)).sort(((e,r)=>r.uncorrectTimes-e.uncorrectTimes))),[n]),b=(0,d.useCallback)((()=>{u(!0);const e=w.map((e=>({...e,probability:1,uncorrectTimes:0,consecutivelyTimes:0,inProgress:!1})));i(e),a(0),r(e)}),[u,a,i,r,w]),{initializeWords:g}=x(t),k=(0,d.useCallback)((()=>{g(),a(0),u(!1)}),[g,u,a]);return(0,c.jsxs)(s.so,{justify:"between",direction:"column",width:"100",maxHeight:!0,children:[(0,c.jsxs)("span",{className:f,children:["Общее время:"," ",`${m<10?"0":""}${m}`,":",`${j<10?"0":""}${j}`]}),w.length>0?(0,c.jsxs)(s.so,{maxHeight:!0,justify:"between",direction:"column",children:[(0,c.jsxs)(s.so,{direction:"column",children:[(0,c.jsx)("span",{className:f,children:"Ошибки:"}),(0,c.jsx)(s.so,{direction:"column",gap:"3",width:"100",children:w.map((e=>(0,c.jsxs)("span",{style:{fontSize:24-(w.length/2>=21?21:w.length/2)},className:"JCvfyDc1",children:[W.includes(e.trainerType)&&(0,c.jsxs)(c.Fragment,{children:[e.valid," -"," ",e.uncorrectTimes," ",[2,3,4].includes(e.uncorrectTimes)?"раза":"раз"]}),"виды союзов"===e.trainerType&&(0,c.jsxs)(c.Fragment,{children:[e.word," -"," ",e.uncorrectTimes," ",[2,3,4].includes(e.uncorrectTimes)?"раза":"раз"," ","(Правильно: ",e.unionType,")"]})]},e.id)))})]}),!l&&(0,c.jsx)("button",{className:p,onClick:b,type:"button",children:"Работа над ошибками"})]}):(0,c.jsx)("button",{className:p,onClick:k,type:"button",children:"Повторить"})]})}));j.displayName="TrainerTotalResult";var w="rxqnQXoT",b="RcYBccp8",g="ywWLKwMM";const k=(0,d.memo)((e=>{let{className:r,style:t,dataTestId:i,onClick:o,children:a,type:l="default"}=e;const[u,m]=(0,d.useState)(!0);return(0,c.jsx)(s.so,{justify:"center","data-testid":i,width:"100",onClick:()=>{m(!1);const e=setTimeout((()=>{m(!0),clearTimeout(e)}),0);o&&o()},className:`TrainerWord ${w} ${r} ${n[`TrainerWord__${l}`]}`,style:{...t,pointerEvents:u?"auto":"none"},children:a})}));k.displayName="TrainerWord";var v=t(364);const C=(0,d.memo)((e=>{let{randomWord:r,wordOnSuccess:t,wordOnFail:n}=e;const i=(0,y.n)(),{isIncorrect:a,isErrorWork:l}=(0,d.useContext)(h.U);return(0,c.jsxs)(s.so,{width:"100",direction:"column",gap:"10",justify:"center",children:[(0,c.jsx)("span",{className:"hRRLbvjX","data-testid":"UnionsTrainerWords__word",children:r.word}),(0,c.jsx)(s.so,{justify:"center",direction:o.L.matches?"column":"row",width:"100",children:v.F.map(((e,s)=>(0,c.jsx)(k,{dataTestId:`UnionsTrainerWords__${e}`,onClick:e===r.unionType?()=>t(i,l,r.id):()=>n(i,l,r.id),type:a&&e!==r.unionType?"invalid":"default",style:0===s?{borderRightWidth:o.L.matches?3:0,borderBottomWidth:o.L.matches?0:3}:{},children:e},e)))})]})}));C.displayName="UnionsTrainerWords";const N=(e,r,t)=>{const n=(0,y.n)(),s=(0,d.useMemo)((()=>n.find((r=>r.id===e))),[e,n]);return{updateRandomWord:(0,d.useCallback)((s=>{let i;i=s?s.filter((r=>r.id!==e)):n.filter((r=>r.id!==e));const o=[!0,!1][Math.floor(2*Math.random())];if(r(o),0===i.length)return;const d=i.reduce(((e,r)=>e+(r.probability||1)),0)*Math.random();for(let e=0,r=0;;e++)if(r+=i[e].probability||1,r>d)return void t(i[e].id)}),[e,t,r,n]),randomWord:s}},R=(0,d.memo)((e=>{let{randomWord:r,randomWordsIsReverse:t,wordOnFail:n,wordOnSuccess:i}=e;const a=(0,y.n)(),{isIncorrect:l,isErrorWork:u}=(0,d.useContext)(h.U),m=e=>(0,c.jsx)(c.Fragment,{children:"cловарные слова"===r.trainerType?(0,c.jsx)(s.so,{children:e.split("").map(((e,t)=>(0,c.jsx)("span",{style:{fontWeight:r.differenceIndexes.includes(t+1)?"bold":"normal"},children:e},t+e)))}):e});return(0,c.jsxs)(s.so,{justify:"center",direction:o.L.matches?t?"columnReverse":"column":t?"rowReverse":"row",width:"100",children:[(0,c.jsx)(k,{dataTestId:"PrimaryTrainerWords__valid",onClick:()=>i(a,u,r.id),style:{borderRightWidth:o.L.matches||t||l?3:0,borderBottomWidth:o.L.matches?t||l?3:0:3,fontSize:r.valid.length>=10?26:36},children:m(r.valid)}),(0,c.jsx)(k,{dataTestId:"PrimaryTrainerWords__invalid",onClick:()=>n(a,u,r.id),type:l?"invalid":"default",style:{borderRightWidth:o.L.matches?3:t?0:3,borderBottomWidth:o.L.matches&&t?0:3,fontSize:r.valid.length>=10?26:36},children:m(r.invalid)})]})}));R.displayName="PrimaryTrainerWords";var S=t(980),I=t(149);const M=(0,d.memo)((e=>{let{words:r}=e;const[t,n]=(0,d.useState)(null),[a,l]=(0,d.useState)(!1),{randomWord:p,updateRandomWord:f}=N(t,l,n),{totalTime:w,setIsIncorrect:b,isIncorrect:g,isErrorWork:k,setIsErrorWork:v,setTotalTime:M}=(0,d.useContext)(h.U);(0,d.useEffect)((()=>{p||n(0)}),[p,t]);const{wordOnFail:_,wordOnSuccess:E,showNewWord:F,waitRepeatedClickInFail:O}=((e,r,t,n)=>{const{changeWordProbability:s,changeWordUncorrectTimes:i,changeWordConsecutivelyTimes:o,changeWordInProgressStatus:a}=(0,T.MR)(),[c,l]=(0,d.useState)(!1),{updateRandomWord:u}=N(e,r,t),m=(0,d.useCallback)(((e,r,t)=>{l(!1),n(!1);const d=e.find((e=>e.id===t));d&&(r||(s({probability:.2,id:d.id}),i({id:d.id,uncorrectTimes:d.uncorrectTimes+1})),o({id:d.id,consecutivelyTimes:0}),a({id:d.id,inProgress:!1}),u(),document.querySelector("main").style.pointerEvents="all",document.onclick=null)}),[o,a,s,i,n,l,u]),h=(0,d.useCallback)(((e,r,t)=>{if(c)return;new Audio("/SuncovRussian/sounds/FailSound.mp3").play(),n(!0),l(!0);const s=document.querySelector("main"),i=setTimeout((()=>{s.style.pointerEvents="none",document.onclick=()=>m(e,r,t),clearTimeout(i)}),0)}),[n,l,m,c]),y=(0,d.useCallback)(((e,r,t)=>{if(c)return;const n=e.find((e=>e.id===t));if(n){if(r){const e=n.consecutivelyTimes+1;o({id:n.id,consecutivelyTimes:e}),3===e&&(a({id:n.id,inProgress:!0}),s({probability:.05,id:n.id}))}else.2===n.probability?s({id:n.id,probability:.1}):.1===n.probability?s({id:n.id,probability:.05}):(s({id:n.id,probability:.01}),a({id:n.id,inProgress:!0}));u()}}),[o,a,s,u,c]);return{showNewWord:m,wordOnSuccess:y,wordOnFail:h,waitRepeatedClickInFail:c}})(t,l,n,b),P=(0,y.n)();(0,d.useEffect)((()=>{P.length&&null===t&&f()}),[t,P,f]),(0,d.useEffect)((()=>(document.onkeydown=e=>((e,r)=>{if(w)return;O&&g&&F(r,k,t);const n=document.querySelectorAll(".TrainerWord"),s=e=>{"виды союзов"!==r[0].trainerType&&a?n[0===e?1:0].click():n[e].click()};o.L.matches?"ArrowUp"===e.key?s(0):"ArrowDown"===e.key&&s(1):"ArrowLeft"===e.key?s(0):"ArrowRight"===e.key&&s(1)})(e,P),()=>{document.onkeydown=null})),[k,g,t,a,F,P,w,O,_,E]);const{initializeWords:L}=x(r);return(0,d.useEffect)((()=>{const e=setTimeout((()=>{b(!1),v(!1),M(0),L(),clearTimeout(e)}),0)}),[L,v,b,M]),(0,c.jsx)(m.YW,{className:"JNyDWZu7",children:P.length>0&&(0,c.jsx)(c.Fragment,{children:w?(0,c.jsx)(j,{words:r,updateRandomWord:f}):(0,c.jsxs)(c.Fragment,{children:[W.includes(P[0].trainerType)&&(0,c.jsx)(s.so,{width:"100",children:(0,c.jsx)(u.C,{text:"Выбирайте ответ, а система будет предлагать новые слова или\n                    те, в которых были допущены ошибки. Когда вы перестанете их\n                    допускать, шкала полностью заполнится. Заполните шкалу\n                    несколько раз, сделайте работу над ошибками - и вы готовы.",textClassName:i})}),"виды союзов"===P[0].trainerType&&(0,c.jsx)(s.so,{width:"100",children:(0,c.jsx)(u.C,{text:"В этом тренажере под подчинительным союзом понимается любое\n                    средство подчинительной связи, т.е. союз, союзное слово,\n                    частица",textClassName:i})}),g&&(0,c.jsx)(s.so,{className:"Ts9_k9h3","data-testid":"Trainer__uncorrect",justify:"center",children:"Неверно"}),p&&(0,c.jsxs)(c.Fragment,{children:[W.includes(P[0].trainerType)&&(0,c.jsx)(R,{randomWord:p,randomWordsIsReverse:a,wordOnFail:_,wordOnSuccess:E}),"виды союзов"===r[0].trainerType&&(0,c.jsx)(C,{randomWord:p,wordOnSuccess:E,wordOnFail:_})]}),(0,c.jsx)(S.i,{}),(0,c.jsx)(I.W,{})]})})})}));M.displayName="TrainerInner";const _=(0,d.memo)((e=>{let{words:r}=e;const[t,n]=(0,d.useState)(0),[s,i]=(0,d.useState)(!1),[o,a]=(0,d.useState)(!1);return(0,c.jsx)(h.U.Provider,{value:{totalTime:t,setTotalTime:n,isIncorrect:s,setIsIncorrect:i,isErrorWork:o,setIsErrorWork:a},children:(0,c.jsx)(l,{removeAfterUnmount:!1,reducers:{Trainer:T.a3},children:(0,c.jsx)(M,{words:r})})})}));_.displayName="TrainerPage"}}]);